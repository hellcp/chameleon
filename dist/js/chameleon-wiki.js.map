{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/chameleon-wiki.js","src/js/wiki/anchor.js","src/js/wiki/edit-section.js","src/js/wiki/login-modal.js","src/js/wiki/migrations/box.js","src/js/wiki/migrations/index.js","src/js/wiki/table.js","src/js/wiki/toc.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chameleon-wiki.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","require(\"./wiki/anchor\");\nrequire(\"./wiki/edit-section\");\nrequire(\"./wiki/login-modal\");\nrequire(\"./wiki/toc\");\nrequire(\"./wiki/table\");\n\nrequire(\"./wiki/migrations\");\n","// Add anchor icons to headings\n// See also src/sass/wiki/_anchor.scss\n\nconst headlines = document.getElementsByClassName(\"mw-headline\");\n\nfor (let i = 0; i < headlines.length; i++) {\n  const headline = headlines.item(i);\n\n  const wrap = document.createElement(\"span\");\n  wrap.className = \"mw-anchor\";\n\n  const link = document.createElement(\"a\");\n  link.href = \"#\" + headline.id;\n  link.innerHTML =\n    '<svg class=\"bi bi-link-45deg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\"/><path d=\"M5.712 6.96l.167-.167a1.99 1.99 0 0 1 .896-.518 1.99 1.99 0 0 1 .518-.896l.167-.167A3.004 3.004 0 0 0 6 5.499c-.22.46-.316.963-.288 1.46z\"/><path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z\"/><path d=\"M10 9.5a2.99 2.99 0 0 0 .288-1.46l-.167.167a1.99 1.99 0 0 1-.896.518 1.99 1.99 0 0 1-.518.896l-.167.167A3.004 3.004 0 0 0 10 9.501z\"/></svg>';\n\n  wrap.append(link);\n  headline.after(wrap);\n}\n","// The \"Edit\" text is replaced with a pencil icon.\n// See also src/sass/wiki/_edit-section.scss\n\nconst wraps = document.getElementsByClassName(\"mw-editsection\");\n\nfor (let i = 0; i < wraps.length; i++) {\n  const wrap = wraps.item(i);\n  const link = wrap.getElementsByTagName(\"a\").item(0);\n  link.innerHTML =\n    '<svg class=\"bi bi-pencil\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z\"/><path fill-rule=\"evenodd\" d=\"M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z\"/></svg>';\n}\n","/**\n * Automatically focus username input after opening login modal.\n * This is a fallback for old Firefox (<= 57) because autofocus property doesn't\n * work and cause style loading issues.\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1404468\n */\nvar toggle = document.getElementById(\"login-modal-toggle\");\n\nif (toggle) {\n  toggle.addEventListener('click', function () {\n    // Must set focus after modal shown, otherwise it won't focus or wrong\n    // position of auto-fill menu\n    setTimeout(function () {\n      document.getElementById(\"login-username\").focus();\n    }, 500);\n  });\n}\n","var boxes = document.getElementsByClassName('box');\n\nfor (var i = 0; i < boxes.length; i++) {\n  var box = boxes.item(i);\n\n  box.classList.remove(\"box\", \"box-shadow\", \"infobox\");\n  box.classList.add(\"card\");\n\n  // Margin for float card\n  if (box.style.float === \"right\") {\n    box.classList.add(\"ml-3\");\n  } else if (box.style.float === \"left\") {\n    box.classList.add(\"mr-3\");\n  }\n\n  // Wrap all content with a \"card-body\" block\n  var cardBody = document.createElement('div');\n  cardBody.classList.add('card-body');\n  cardBody.innerHTML = box.innerHTML;\n  box.innerHTML = '';\n  box.appendChild(cardBody);\n\n  // Set card image\n  var imgs = box.getElementsByTagName(\"img\");\n  if (imgs.length > 0 && imgs.item(0).clientWidth >= 100) {\n    imgs.item(0).classList.add(\"card-img-top\");\n    box.insertBefore(imgs.item(0), box.firstChild);\n  }\n\n  // Set card title\n  var cardHeaders = box.getElementsByClassName(\"box-header\");\n  if (cardHeaders) {\n    var cardHeader = cardHeaders.item(0);\n    var title = document.createElement('h4');\n    title.classList.add('card-title');\n    title.innerHTML = cardHeader.innerHTML;\n    cardHeader.parentNode.removeChild(cardHeader);\n    cardBody.insertBefore(title, cardBody.firstChild);\n  }\n\n  // Remove empty <p> tag\n  var ps = cardBody.getElementsByTagName('p');\n  for (var j = 0; j < ps.length; j++) {\n    var p = ps.item(j);\n    if (p.getElementsByTagName(\"img\").length || p.textContent.trim()) return;\n    p.parentNode.removeChild(p);\n  }\n}\n","require(\"./box\");\n","const tables = document.getElementsByClassName(\"wikitable\");\n\nwhile (tables.length) {\n  const list = tables.item(0).classList;\n  list.add(\"table\");\n  list.remove(\"wikitable\");\n}\n","// Move table of contents to sidebar\nconst toc = document.getElementById(\"toc\");\nconst sidebar = document.getElementById(\"toc-sidebar\");\nconst main = document.getElementById(\"main\");\n\nif (sidebar) {\n  if (toc) {\n    sidebar.append(toc);\n    sidebar.classList.add(\"d-lg-block\", \"col-lg-3\");\n    main.classList.add(\"col-lg-9\");\n  }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY2hhbWVsZW9uLXdpa2kuanMiLCJzcmMvanMvd2lraS9hbmNob3IuanMiLCJzcmMvanMvd2lraS9lZGl0LXNlY3Rpb24uanMiLCJzcmMvanMvd2lraS9sb2dpbi1tb2RhbC5qcyIsInNyYy9qcy93aWtpL21pZ3JhdGlvbnMvYm94LmpzIiwic3JjL2pzL3dpa2kvbWlncmF0aW9ucy9pbmRleC5qcyIsInNyYy9qcy93aWtpL3RhYmxlLmpzIiwic3JjL2pzL3dpa2kvdG9jLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwicmVxdWlyZShcIi4vd2lraS9hbmNob3JcIik7XG5yZXF1aXJlKFwiLi93aWtpL2VkaXQtc2VjdGlvblwiKTtcbnJlcXVpcmUoXCIuL3dpa2kvbG9naW4tbW9kYWxcIik7XG5yZXF1aXJlKFwiLi93aWtpL3RvY1wiKTtcbnJlcXVpcmUoXCIuL3dpa2kvdGFibGVcIik7XG5cbnJlcXVpcmUoXCIuL3dpa2kvbWlncmF0aW9uc1wiKTtcbiIsIi8vIEFkZCBhbmNob3IgaWNvbnMgdG8gaGVhZGluZ3Ncbi8vIFNlZSBhbHNvIHNyYy9zYXNzL3dpa2kvX2FuY2hvci5zY3NzXG5cbmNvbnN0IGhlYWRsaW5lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtdy1oZWFkbGluZVwiKTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBoZWFkbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgY29uc3QgaGVhZGxpbmUgPSBoZWFkbGluZXMuaXRlbShpKTtcblxuICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIHdyYXAuY2xhc3NOYW1lID0gXCJtdy1hbmNob3JcIjtcblxuICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gIGxpbmsuaHJlZiA9IFwiI1wiICsgaGVhZGxpbmUuaWQ7XG4gIGxpbmsuaW5uZXJIVE1MID1cbiAgICAnPHN2ZyBjbGFzcz1cImJpIGJpLWxpbmstNDVkZWdcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNNC43MTUgNi41NDJMMy4zNDMgNy45MTRhMyAzIDAgMSAwIDQuMjQzIDQuMjQzbDEuODI4LTEuODI5QTMgMyAwIDAgMCA4LjU4NiA1LjVMOCA2LjA4NmExLjAwMSAxLjAwMSAwIDAgMC0uMTU0LjE5OSAyIDIgMCAwIDEgLjg2MSAzLjMzN0w2Ljg4IDExLjQ1YTIgMiAwIDEgMS0yLjgzLTIuODNsLjc5My0uNzkyYTQuMDE4IDQuMDE4IDAgMCAxLS4xMjgtMS4yODd6XCIvPjxwYXRoIGQ9XCJNNS43MTIgNi45NmwuMTY3LS4xNjdhMS45OSAxLjk5IDAgMCAxIC44OTYtLjUxOCAxLjk5IDEuOTkgMCAwIDEgLjUxOC0uODk2bC4xNjctLjE2N0EzLjAwNCAzLjAwNCAwIDAgMCA2IDUuNDk5Yy0uMjIuNDYtLjMxNi45NjMtLjI4OCAxLjQ2elwiLz48cGF0aCBkPVwiTTYuNTg2IDQuNjcyQTMgMyAwIDAgMCA3LjQxNCA5LjVsLjc3NS0uNzc2YTIgMiAwIDAgMS0uODk2LTMuMzQ2TDkuMTIgMy41NWEyIDIgMCAwIDEgMi44MyAyLjgzbC0uNzkzLjc5MmMuMTEyLjQyLjE1NS44NTUuMTI4IDEuMjg3bDEuMzcyLTEuMzcyYTMgMyAwIDAgMC00LjI0My00LjI0M0w2LjU4NiA0LjY3MnpcIi8+PHBhdGggZD1cIk0xMCA5LjVhMi45OSAyLjk5IDAgMCAwIC4yODgtMS40NmwtLjE2Ny4xNjdhMS45OSAxLjk5IDAgMCAxLS44OTYuNTE4IDEuOTkgMS45OSAwIDAgMS0uNTE4Ljg5NmwtLjE2Ny4xNjdBMy4wMDQgMy4wMDQgMCAwIDAgMTAgOS41MDF6XCIvPjwvc3ZnPic7XG5cbiAgd3JhcC5hcHBlbmQobGluayk7XG4gIGhlYWRsaW5lLmFmdGVyKHdyYXApO1xufVxuIiwiLy8gVGhlIFwiRWRpdFwiIHRleHQgaXMgcmVwbGFjZWQgd2l0aCBhIHBlbmNpbCBpY29uLlxuLy8gU2VlIGFsc28gc3JjL3Nhc3Mvd2lraS9fZWRpdC1zZWN0aW9uLnNjc3NcblxuY29uc3Qgd3JhcHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibXctZWRpdHNlY3Rpb25cIik7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgd3JhcHMubGVuZ3RoOyBpKyspIHtcbiAgY29uc3Qgd3JhcCA9IHdyYXBzLml0ZW0oaSk7XG4gIGNvbnN0IGxpbmsgPSB3cmFwLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKS5pdGVtKDApO1xuICBsaW5rLmlubmVySFRNTCA9XG4gICAgJzxzdmcgY2xhc3M9XCJiaSBiaS1wZW5jaWxcIiB3aWR0aD1cIjFlbVwiIGhlaWdodD1cIjFlbVwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTExLjI5MyAxLjI5M2ExIDEgMCAwIDEgMS40MTQgMGwyIDJhMSAxIDAgMCAxIDAgMS40MTRsLTkgOWExIDEgMCAwIDEtLjM5LjI0MmwtMyAxYTEgMSAwIDAgMS0xLjI2Ni0xLjI2NWwxLTNhMSAxIDAgMCAxIC4yNDItLjM5MWw5LTl6TTEyIDJsMiAyLTkgOS0zIDEgMS0zIDktOXpcIi8+PHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTIuMTQ2IDYuMzU0bC0yLjUtMi41LjcwOC0uNzA4IDIuNSAyLjUtLjcwNy43MDh6TTMgMTB2LjVhLjUuNSAwIDAgMCAuNS41SDR2LjVhLjUuNSAwIDAgMCAuNS41SDV2LjVhLjUuNSAwIDAgMCAuNS41SDZ2LTEuNWEuNS41IDAgMCAwLS41LS41SDV2LS41YS41LjUgMCAwIDAtLjUtLjVIM3pcIi8+PC9zdmc+Jztcbn1cbiIsIi8qKlxuICogQXV0b21hdGljYWxseSBmb2N1cyB1c2VybmFtZSBpbnB1dCBhZnRlciBvcGVuaW5nIGxvZ2luIG1vZGFsLlxuICogVGhpcyBpcyBhIGZhbGxiYWNrIGZvciBvbGQgRmlyZWZveCAoPD0gNTcpIGJlY2F1c2UgYXV0b2ZvY3VzIHByb3BlcnR5IGRvZXNuJ3RcbiAqIHdvcmsgYW5kIGNhdXNlIHN0eWxlIGxvYWRpbmcgaXNzdWVzLlxuICogQHNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDA0NDY4XG4gKi9cbnZhciB0b2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luLW1vZGFsLXRvZ2dsZVwiKTtcblxuaWYgKHRvZ2dsZSkge1xuICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gTXVzdCBzZXQgZm9jdXMgYWZ0ZXIgbW9kYWwgc2hvd24sIG90aGVyd2lzZSBpdCB3b24ndCBmb2N1cyBvciB3cm9uZ1xuICAgIC8vIHBvc2l0aW9uIG9mIGF1dG8tZmlsbCBtZW51XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luLXVzZXJuYW1lXCIpLmZvY3VzKCk7XG4gICAgfSwgNTAwKTtcbiAgfSk7XG59XG4iLCJ2YXIgYm94ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdib3gnKTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBib3hlcy5sZW5ndGg7IGkrKykge1xuICB2YXIgYm94ID0gYm94ZXMuaXRlbShpKTtcblxuICBib3guY2xhc3NMaXN0LnJlbW92ZShcImJveFwiLCBcImJveC1zaGFkb3dcIiwgXCJpbmZvYm94XCIpO1xuICBib3guY2xhc3NMaXN0LmFkZChcImNhcmRcIik7XG5cbiAgLy8gTWFyZ2luIGZvciBmbG9hdCBjYXJkXG4gIGlmIChib3guc3R5bGUuZmxvYXQgPT09IFwicmlnaHRcIikge1xuICAgIGJveC5jbGFzc0xpc3QuYWRkKFwibWwtM1wiKTtcbiAgfSBlbHNlIGlmIChib3guc3R5bGUuZmxvYXQgPT09IFwibGVmdFwiKSB7XG4gICAgYm94LmNsYXNzTGlzdC5hZGQoXCJtci0zXCIpO1xuICB9XG5cbiAgLy8gV3JhcCBhbGwgY29udGVudCB3aXRoIGEgXCJjYXJkLWJvZHlcIiBibG9ja1xuICB2YXIgY2FyZEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2FyZEJvZHkuY2xhc3NMaXN0LmFkZCgnY2FyZC1ib2R5Jyk7XG4gIGNhcmRCb2R5LmlubmVySFRNTCA9IGJveC5pbm5lckhUTUw7XG4gIGJveC5pbm5lckhUTUwgPSAnJztcbiAgYm94LmFwcGVuZENoaWxkKGNhcmRCb2R5KTtcblxuICAvLyBTZXQgY2FyZCBpbWFnZVxuICB2YXIgaW1ncyA9IGJveC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKTtcbiAgaWYgKGltZ3MubGVuZ3RoID4gMCAmJiBpbWdzLml0ZW0oMCkuY2xpZW50V2lkdGggPj0gMTAwKSB7XG4gICAgaW1ncy5pdGVtKDApLmNsYXNzTGlzdC5hZGQoXCJjYXJkLWltZy10b3BcIik7XG4gICAgYm94Lmluc2VydEJlZm9yZShpbWdzLml0ZW0oMCksIGJveC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIC8vIFNldCBjYXJkIHRpdGxlXG4gIHZhciBjYXJkSGVhZGVycyA9IGJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYm94LWhlYWRlclwiKTtcbiAgaWYgKGNhcmRIZWFkZXJzKSB7XG4gICAgdmFyIGNhcmRIZWFkZXIgPSBjYXJkSGVhZGVycy5pdGVtKDApO1xuICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2g0Jyk7XG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgnY2FyZC10aXRsZScpO1xuICAgIHRpdGxlLmlubmVySFRNTCA9IGNhcmRIZWFkZXIuaW5uZXJIVE1MO1xuICAgIGNhcmRIZWFkZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjYXJkSGVhZGVyKTtcbiAgICBjYXJkQm9keS5pbnNlcnRCZWZvcmUodGl0bGUsIGNhcmRCb2R5LmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGVtcHR5IDxwPiB0YWdcbiAgdmFyIHBzID0gY2FyZEJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3AnKTtcbiAgZm9yICh2YXIgaiA9IDA7IGogPCBwcy5sZW5ndGg7IGorKykge1xuICAgIHZhciBwID0gcHMuaXRlbShqKTtcbiAgICBpZiAocC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKS5sZW5ndGggfHwgcC50ZXh0Q29udGVudC50cmltKCkpIHJldHVybjtcbiAgICBwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocCk7XG4gIH1cbn1cbiIsInJlcXVpcmUoXCIuL2JveFwiKTtcbiIsImNvbnN0IHRhYmxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ3aWtpdGFibGVcIik7XG5cbndoaWxlICh0YWJsZXMubGVuZ3RoKSB7XG4gIGNvbnN0IGxpc3QgPSB0YWJsZXMuaXRlbSgwKS5jbGFzc0xpc3Q7XG4gIGxpc3QuYWRkKFwidGFibGVcIik7XG4gIGxpc3QucmVtb3ZlKFwid2lraXRhYmxlXCIpO1xufVxuIiwiLy8gTW92ZSB0YWJsZSBvZiBjb250ZW50cyB0byBzaWRlYmFyXG5jb25zdCB0b2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvY1wiKTtcbmNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvYy1zaWRlYmFyXCIpO1xuY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpblwiKTtcblxuaWYgKHNpZGViYXIpIHtcbiAgaWYgKHRvYykge1xuICAgIHNpZGViYXIuYXBwZW5kKHRvYyk7XG4gICAgc2lkZWJhci5jbGFzc0xpc3QuYWRkKFwiZC1sZy1ibG9ja1wiLCBcImNvbC1sZy0zXCIpO1xuICAgIG1haW4uY2xhc3NMaXN0LmFkZChcImNvbC1sZy05XCIpO1xuICB9XG59XG4iXX0="}