{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/chameleon-wiki.js","src/js/wiki/anchor.js","src/js/wiki/class-name-mapping.js","src/js/wiki/edit-section.js","src/js/wiki/login-modal.js","src/js/wiki/migrations/box.js","src/js/wiki/migrations/index.js","src/js/wiki/preferences.js","src/js/wiki/toc.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chameleon-wiki.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","require(\"./wiki/anchor\");\nrequire(\"./wiki/edit-section\");\nrequire(\"./wiki/login-modal\");\nrequire(\"./wiki/preferences\");\nrequire(\"./wiki/toc\");\nrequire(\"./wiki/class-name-mapping\");\n\nrequire(\"./wiki/migrations\");\n","// Add anchor icons to headings\n// See also src/sass/wiki/_anchor.scss\n\nconst headlines = document.getElementsByClassName(\"mw-headline\");\n\nfor (let i = 0; i < headlines.length; i++) {\n  const headline = headlines.item(i);\n\n  const wrap = document.createElement(\"span\");\n  wrap.className = \"mw-anchor\";\n\n  const link = document.createElement(\"a\");\n  link.href = \"#\" + headline.id;\n  link.innerHTML =\n    '<svg class=\"bi bi-link-45deg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\"/><path d=\"M5.712 6.96l.167-.167a1.99 1.99 0 0 1 .896-.518 1.99 1.99 0 0 1 .518-.896l.167-.167A3.004 3.004 0 0 0 6 5.499c-.22.46-.316.963-.288 1.46z\"/><path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z\"/><path d=\"M10 9.5a2.99 2.99 0 0 0 .288-1.46l-.167.167a1.99 1.99 0 0 1-.896.518 1.99 1.99 0 0 1-.518.896l-.167.167A3.004 3.004 0 0 0 10 9.501z\"/></svg>';\n\n  wrap.append(link);\n  headline.after(wrap);\n}\n","const classNameMapping = [\n  { select: 'error', remove: 'error', add: 'alert alert-danger' },\n  { select: 'mw-htmlform-submit', remove: 'mw-htmlform-submit', add: 'btn btn-primary' },\n  { select: 'mw-warning-with-logexcerpt', remove: 'mw-warning-with-logexcerpt', add: 'alert alert-info' },\n  { select: 'wikitable', remove: 'wikitable', add: 'table' }\n];\n\nclassNameMapping.forEach(m => {\n  const warnings = document.getElementsByClassName(m.select);\n\n  while (warnings.length) {\n    const list = warnings.item(0).classList;\n    list.add(...m.add.split(' '));\n    list.remove(...m.remove.split(' '));\n  }\n});\n","// The \"Edit\" text is replaced with a pencil icon.\n// See also src/sass/wiki/_edit-section.scss\n\nconst wraps = document.getElementsByClassName(\"mw-editsection\");\n\nfor (let i = 0; i < wraps.length; i++) {\n  const wrap = wraps.item(i);\n  const link = wrap.getElementsByTagName(\"a\").item(0);\n  link.innerHTML =\n    '<svg class=\"bi bi-pencil\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z\"/><path fill-rule=\"evenodd\" d=\"M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z\"/></svg>';\n}\n","/**\n * Automatically focus username input after opening login modal.\n * This is a fallback for old Firefox (<= 57) because autofocus property doesn't\n * work and cause style loading issues.\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1404468\n */\nvar toggle = document.getElementById(\"login-modal-toggle\");\n\nif (toggle) {\n  toggle.addEventListener('click', function () {\n    // Must set focus after modal shown, otherwise it won't focus or wrong\n    // position of auto-fill menu\n    setTimeout(function () {\n      document.getElementById(\"login-username\").focus();\n    }, 500);\n  });\n}\n","var boxes = document.getElementsByClassName('box');\n\nfor (var i = 0; i < boxes.length; i++) {\n  var box = boxes.item(i);\n\n  box.classList.remove(\"box\", \"box-shadow\", \"infobox\");\n  box.classList.add(\"card\");\n\n  // Margin for float card\n  if (box.style.float === \"right\") {\n    box.classList.add(\"ml-3\");\n  } else if (box.style.float === \"left\") {\n    box.classList.add(\"mr-3\");\n  }\n\n  // Wrap all content with a \"card-body\" block\n  var cardBody = document.createElement('div');\n  cardBody.classList.add('card-body');\n  cardBody.innerHTML = box.innerHTML;\n  box.innerHTML = '';\n  box.appendChild(cardBody);\n\n  // Set card image\n  var imgs = box.getElementsByTagName(\"img\");\n  if (imgs.length > 0 && imgs.item(0).clientWidth >= 100) {\n    imgs.item(0).classList.add(\"card-img-top\");\n    box.insertBefore(imgs.item(0), box.firstChild);\n  }\n\n  // Set card title\n  var cardHeaders = box.getElementsByClassName(\"box-header\");\n  if (cardHeaders) {\n    var cardHeader = cardHeaders.item(0);\n    var title = document.createElement('h4');\n    title.classList.add('card-title');\n    title.innerHTML = cardHeader.innerHTML;\n    cardHeader.parentNode.removeChild(cardHeader);\n    cardBody.insertBefore(title, cardBody.firstChild);\n  }\n\n  // Remove empty <p> tag\n  var ps = cardBody.getElementsByTagName('p');\n  for (var j = 0; j < ps.length; j++) {\n    var p = ps.item(j);\n    if (p.getElementsByTagName(\"img\").length || p.textContent.trim()) return;\n    p.parentNode.removeChild(p);\n  }\n}\n","require(\"./box\");\n","const preftoc = document.getElementById(\"preftoc\");\nconst preferences = document.getElementById(\"preferences\");\n\nif (preftoc && preferences) {\n  const items = preftoc.getElementsByTagName(\"li\");\n  const links = preftoc.getElementsByTagName(\"a\");\n\n  preftoc.classList.add(\"nav\", \"nav-pills\");\n  preferences.classList.add(\"card\", \"card-body\", \"mt-3\");\n\n  for (let i = 0; i < items.length; i++) {\n    const item = items.item(i);\n    item.classList.add(\"nav-item\");\n    const link = item.getElementsByTagName(\"a\").item(0);\n    link.classList.add(\"nav-link\");\n    if (item.classList.contains(\"selected\")) {\n      link.classList.add(\"active\");\n    }\n    link.addEventListener(\"click\", function () {\n      for (let j = 0; j < links.length; j++) {\n        links.item(j).classList.remove(\"active\");\n      }\n      link.classList.add(\"active\");\n    });\n  }\n}\n","// Move table of contents to sidebar\nconst toc = document.getElementById(\"toc\");\nconst sidebar = document.getElementById(\"toc-sidebar\");\nconst main = document.getElementById(\"main\");\n\nif (sidebar) {\n  if (toc) {\n    sidebar.append(toc);\n    sidebar.classList.add(\"d-lg-block\", \"col-lg-3\");\n    main.classList.add(\"col-lg-9\");\n  }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY2hhbWVsZW9uLXdpa2kuanMiLCJzcmMvanMvd2lraS9hbmNob3IuanMiLCJzcmMvanMvd2lraS9jbGFzcy1uYW1lLW1hcHBpbmcuanMiLCJzcmMvanMvd2lraS9lZGl0LXNlY3Rpb24uanMiLCJzcmMvanMvd2lraS9sb2dpbi1tb2RhbC5qcyIsInNyYy9qcy93aWtpL21pZ3JhdGlvbnMvYm94LmpzIiwic3JjL2pzL3dpa2kvbWlncmF0aW9ucy9pbmRleC5qcyIsInNyYy9qcy93aWtpL3ByZWZlcmVuY2VzLmpzIiwic3JjL2pzL3dpa2kvdG9jLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJyZXF1aXJlKFwiLi93aWtpL2FuY2hvclwiKTtcbnJlcXVpcmUoXCIuL3dpa2kvZWRpdC1zZWN0aW9uXCIpO1xucmVxdWlyZShcIi4vd2lraS9sb2dpbi1tb2RhbFwiKTtcbnJlcXVpcmUoXCIuL3dpa2kvcHJlZmVyZW5jZXNcIik7XG5yZXF1aXJlKFwiLi93aWtpL3RvY1wiKTtcbnJlcXVpcmUoXCIuL3dpa2kvY2xhc3MtbmFtZS1tYXBwaW5nXCIpO1xuXG5yZXF1aXJlKFwiLi93aWtpL21pZ3JhdGlvbnNcIik7XG4iLCIvLyBBZGQgYW5jaG9yIGljb25zIHRvIGhlYWRpbmdzXG4vLyBTZWUgYWxzbyBzcmMvc2Fzcy93aWtpL19hbmNob3Iuc2Nzc1xuXG5jb25zdCBoZWFkbGluZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibXctaGVhZGxpbmVcIik7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgaGVhZGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gIGNvbnN0IGhlYWRsaW5lID0gaGVhZGxpbmVzLml0ZW0oaSk7XG5cbiAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICB3cmFwLmNsYXNzTmFtZSA9IFwibXctYW5jaG9yXCI7XG5cbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICBsaW5rLmhyZWYgPSBcIiNcIiArIGhlYWRsaW5lLmlkO1xuICBsaW5rLmlubmVySFRNTCA9XG4gICAgJzxzdmcgY2xhc3M9XCJiaSBiaS1saW5rLTQ1ZGVnXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTQuNzE1IDYuNTQyTDMuMzQzIDcuOTE0YTMgMyAwIDEgMCA0LjI0MyA0LjI0M2wxLjgyOC0xLjgyOUEzIDMgMCAwIDAgOC41ODYgNS41TDggNi4wODZhMS4wMDEgMS4wMDEgMCAwIDAtLjE1NC4xOTkgMiAyIDAgMCAxIC44NjEgMy4zMzdMNi44OCAxMS40NWEyIDIgMCAxIDEtMi44My0yLjgzbC43OTMtLjc5MmE0LjAxOCA0LjAxOCAwIDAgMS0uMTI4LTEuMjg3elwiLz48cGF0aCBkPVwiTTUuNzEyIDYuOTZsLjE2Ny0uMTY3YTEuOTkgMS45OSAwIDAgMSAuODk2LS41MTggMS45OSAxLjk5IDAgMCAxIC41MTgtLjg5NmwuMTY3LS4xNjdBMy4wMDQgMy4wMDQgMCAwIDAgNiA1LjQ5OWMtLjIyLjQ2LS4zMTYuOTYzLS4yODggMS40NnpcIi8+PHBhdGggZD1cIk02LjU4NiA0LjY3MkEzIDMgMCAwIDAgNy40MTQgOS41bC43NzUtLjc3NmEyIDIgMCAwIDEtLjg5Ni0zLjM0Nkw5LjEyIDMuNTVhMiAyIDAgMCAxIDIuODMgMi44M2wtLjc5My43OTJjLjExMi40Mi4xNTUuODU1LjEyOCAxLjI4N2wxLjM3Mi0xLjM3MmEzIDMgMCAwIDAtNC4yNDMtNC4yNDNMNi41ODYgNC42NzJ6XCIvPjxwYXRoIGQ9XCJNMTAgOS41YTIuOTkgMi45OSAwIDAgMCAuMjg4LTEuNDZsLS4xNjcuMTY3YTEuOTkgMS45OSAwIDAgMS0uODk2LjUxOCAxLjk5IDEuOTkgMCAwIDEtLjUxOC44OTZsLS4xNjcuMTY3QTMuMDA0IDMuMDA0IDAgMCAwIDEwIDkuNTAxelwiLz48L3N2Zz4nO1xuXG4gIHdyYXAuYXBwZW5kKGxpbmspO1xuICBoZWFkbGluZS5hZnRlcih3cmFwKTtcbn1cbiIsImNvbnN0IGNsYXNzTmFtZU1hcHBpbmcgPSBbXG4gIHsgc2VsZWN0OiAnZXJyb3InLCByZW1vdmU6ICdlcnJvcicsIGFkZDogJ2FsZXJ0IGFsZXJ0LWRhbmdlcicgfSxcbiAgeyBzZWxlY3Q6ICdtdy1odG1sZm9ybS1zdWJtaXQnLCByZW1vdmU6ICdtdy1odG1sZm9ybS1zdWJtaXQnLCBhZGQ6ICdidG4gYnRuLXByaW1hcnknIH0sXG4gIHsgc2VsZWN0OiAnbXctd2FybmluZy13aXRoLWxvZ2V4Y2VycHQnLCByZW1vdmU6ICdtdy13YXJuaW5nLXdpdGgtbG9nZXhjZXJwdCcsIGFkZDogJ2FsZXJ0IGFsZXJ0LWluZm8nIH0sXG4gIHsgc2VsZWN0OiAnd2lraXRhYmxlJywgcmVtb3ZlOiAnd2lraXRhYmxlJywgYWRkOiAndGFibGUnIH1cbl07XG5cbmNsYXNzTmFtZU1hcHBpbmcuZm9yRWFjaChtID0+IHtcbiAgY29uc3Qgd2FybmluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG0uc2VsZWN0KTtcblxuICB3aGlsZSAod2FybmluZ3MubGVuZ3RoKSB7XG4gICAgY29uc3QgbGlzdCA9IHdhcm5pbmdzLml0ZW0oMCkuY2xhc3NMaXN0O1xuICAgIGxpc3QuYWRkKC4uLm0uYWRkLnNwbGl0KCcgJykpO1xuICAgIGxpc3QucmVtb3ZlKC4uLm0ucmVtb3ZlLnNwbGl0KCcgJykpO1xuICB9XG59KTtcbiIsIi8vIFRoZSBcIkVkaXRcIiB0ZXh0IGlzIHJlcGxhY2VkIHdpdGggYSBwZW5jaWwgaWNvbi5cbi8vIFNlZSBhbHNvIHNyYy9zYXNzL3dpa2kvX2VkaXQtc2VjdGlvbi5zY3NzXG5cbmNvbnN0IHdyYXBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm13LWVkaXRzZWN0aW9uXCIpO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IHdyYXBzLmxlbmd0aDsgaSsrKSB7XG4gIGNvbnN0IHdyYXAgPSB3cmFwcy5pdGVtKGkpO1xuICBjb25zdCBsaW5rID0gd3JhcC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIikuaXRlbSgwKTtcbiAgbGluay5pbm5lckhUTUwgPVxuICAgICc8c3ZnIGNsYXNzPVwiYmkgYmktcGVuY2lsXCIgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMS4yOTMgMS4yOTNhMSAxIDAgMCAxIDEuNDE0IDBsMiAyYTEgMSAwIDAgMSAwIDEuNDE0bC05IDlhMSAxIDAgMCAxLS4zOS4yNDJsLTMgMWExIDEgMCAwIDEtMS4yNjYtMS4yNjVsMS0zYTEgMSAwIDAgMSAuMjQyLS4zOTFsOS05ek0xMiAybDIgMi05IDktMyAxIDEtMyA5LTl6XCIvPjxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTEyLjE0NiA2LjM1NGwtMi41LTIuNS43MDgtLjcwOCAyLjUgMi41LS43MDcuNzA4ek0zIDEwdi41YS41LjUgMCAwIDAgLjUuNUg0di41YS41LjUgMCAwIDAgLjUuNUg1di41YS41LjUgMCAwIDAgLjUuNUg2di0xLjVhLjUuNSAwIDAgMC0uNS0uNUg1di0uNWEuNS41IDAgMCAwLS41LS41SDN6XCIvPjwvc3ZnPic7XG59XG4iLCIvKipcbiAqIEF1dG9tYXRpY2FsbHkgZm9jdXMgdXNlcm5hbWUgaW5wdXQgYWZ0ZXIgb3BlbmluZyBsb2dpbiBtb2RhbC5cbiAqIFRoaXMgaXMgYSBmYWxsYmFjayBmb3Igb2xkIEZpcmVmb3ggKDw9IDU3KSBiZWNhdXNlIGF1dG9mb2N1cyBwcm9wZXJ0eSBkb2Vzbid0XG4gKiB3b3JrIGFuZCBjYXVzZSBzdHlsZSBsb2FkaW5nIGlzc3Vlcy5cbiAqIEBzZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQwNDQ2OFxuICovXG52YXIgdG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpbi1tb2RhbC10b2dnbGVcIik7XG5cbmlmICh0b2dnbGUpIHtcbiAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIC8vIE11c3Qgc2V0IGZvY3VzIGFmdGVyIG1vZGFsIHNob3duLCBvdGhlcndpc2UgaXQgd29uJ3QgZm9jdXMgb3Igd3JvbmdcbiAgICAvLyBwb3NpdGlvbiBvZiBhdXRvLWZpbGwgbWVudVxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpbi11c2VybmFtZVwiKS5mb2N1cygpO1xuICAgIH0sIDUwMCk7XG4gIH0pO1xufVxuIiwidmFyIGJveGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYm94Jyk7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgYm94ZXMubGVuZ3RoOyBpKyspIHtcbiAgdmFyIGJveCA9IGJveGVzLml0ZW0oaSk7XG5cbiAgYm94LmNsYXNzTGlzdC5yZW1vdmUoXCJib3hcIiwgXCJib3gtc2hhZG93XCIsIFwiaW5mb2JveFwiKTtcbiAgYm94LmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIpO1xuXG4gIC8vIE1hcmdpbiBmb3IgZmxvYXQgY2FyZFxuICBpZiAoYm94LnN0eWxlLmZsb2F0ID09PSBcInJpZ2h0XCIpIHtcbiAgICBib3guY2xhc3NMaXN0LmFkZChcIm1sLTNcIik7XG4gIH0gZWxzZSBpZiAoYm94LnN0eWxlLmZsb2F0ID09PSBcImxlZnRcIikge1xuICAgIGJveC5jbGFzc0xpc3QuYWRkKFwibXItM1wiKTtcbiAgfVxuXG4gIC8vIFdyYXAgYWxsIGNvbnRlbnQgd2l0aCBhIFwiY2FyZC1ib2R5XCIgYmxvY2tcbiAgdmFyIGNhcmRCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNhcmRCb2R5LmNsYXNzTGlzdC5hZGQoJ2NhcmQtYm9keScpO1xuICBjYXJkQm9keS5pbm5lckhUTUwgPSBib3guaW5uZXJIVE1MO1xuICBib3guaW5uZXJIVE1MID0gJyc7XG4gIGJveC5hcHBlbmRDaGlsZChjYXJkQm9keSk7XG5cbiAgLy8gU2V0IGNhcmQgaW1hZ2VcbiAgdmFyIGltZ3MgPSBib3guZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbWdcIik7XG4gIGlmIChpbWdzLmxlbmd0aCA+IDAgJiYgaW1ncy5pdGVtKDApLmNsaWVudFdpZHRoID49IDEwMCkge1xuICAgIGltZ3MuaXRlbSgwKS5jbGFzc0xpc3QuYWRkKFwiY2FyZC1pbWctdG9wXCIpO1xuICAgIGJveC5pbnNlcnRCZWZvcmUoaW1ncy5pdGVtKDApLCBib3guZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvLyBTZXQgY2FyZCB0aXRsZVxuICB2YXIgY2FyZEhlYWRlcnMgPSBib3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJveC1oZWFkZXJcIik7XG4gIGlmIChjYXJkSGVhZGVycykge1xuICAgIHZhciBjYXJkSGVhZGVyID0gY2FyZEhlYWRlcnMuaXRlbSgwKTtcbiAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpO1xuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ2NhcmQtdGl0bGUnKTtcbiAgICB0aXRsZS5pbm5lckhUTUwgPSBjYXJkSGVhZGVyLmlubmVySFRNTDtcbiAgICBjYXJkSGVhZGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2FyZEhlYWRlcik7XG4gICAgY2FyZEJvZHkuaW5zZXJ0QmVmb3JlKHRpdGxlLCBjYXJkQm9keS5maXJzdENoaWxkKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSBlbXB0eSA8cD4gdGFnXG4gIHZhciBwcyA9IGNhcmRCb2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwJyk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgcHMubGVuZ3RoOyBqKyspIHtcbiAgICB2YXIgcCA9IHBzLml0ZW0oaik7XG4gICAgaWYgKHAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbWdcIikubGVuZ3RoIHx8IHAudGV4dENvbnRlbnQudHJpbSgpKSByZXR1cm47XG4gICAgcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHApO1xuICB9XG59XG4iLCJyZXF1aXJlKFwiLi9ib3hcIik7XG4iLCJjb25zdCBwcmVmdG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmVmdG9jXCIpO1xuY29uc3QgcHJlZmVyZW5jZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByZWZlcmVuY2VzXCIpO1xuXG5pZiAocHJlZnRvYyAmJiBwcmVmZXJlbmNlcykge1xuICBjb25zdCBpdGVtcyA9IHByZWZ0b2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaVwiKTtcbiAgY29uc3QgbGlua3MgPSBwcmVmdG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKTtcblxuICBwcmVmdG9jLmNsYXNzTGlzdC5hZGQoXCJuYXZcIiwgXCJuYXYtcGlsbHNcIik7XG4gIHByZWZlcmVuY2VzLmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIsIFwiY2FyZC1ib2R5XCIsIFwibXQtM1wiKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaXRlbSA9IGl0ZW1zLml0ZW0oaSk7XG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwibmF2LWl0ZW1cIik7XG4gICAgY29uc3QgbGluayA9IGl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpLml0ZW0oMCk7XG4gICAgbGluay5jbGFzc0xpc3QuYWRkKFwibmF2LWxpbmtcIik7XG4gICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0ZWRcIikpIHtcbiAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsaW5rcy5sZW5ndGg7IGorKykge1xuICAgICAgICBsaW5rcy5pdGVtKGopLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICB9XG4gICAgICBsaW5rLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIE1vdmUgdGFibGUgb2YgY29udGVudHMgdG8gc2lkZWJhclxuY29uc3QgdG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2NcIik7XG5jb25zdCBzaWRlYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2Mtc2lkZWJhclwiKTtcbmNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5cIik7XG5cbmlmIChzaWRlYmFyKSB7XG4gIGlmICh0b2MpIHtcbiAgICBzaWRlYmFyLmFwcGVuZCh0b2MpO1xuICAgIHNpZGViYXIuY2xhc3NMaXN0LmFkZChcImQtbGctYmxvY2tcIiwgXCJjb2wtbGctM1wiKTtcbiAgICBtYWluLmNsYXNzTGlzdC5hZGQoXCJjb2wtbGctOVwiKTtcbiAgfVxufVxuIl19"}