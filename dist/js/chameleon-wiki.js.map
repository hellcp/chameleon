{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/chameleon-wiki.js","src/js/wiki/anchor.js","src/js/wiki/edit-section.js","src/js/wiki/form.js","src/js/wiki/login-modal.js","src/js/wiki/migrations/box.js","src/js/wiki/migrations/index.js","src/js/wiki/preferences.js","src/js/wiki/table.js","src/js/wiki/toc.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chameleon-wiki.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","require(\"./wiki/anchor\");\nrequire(\"./wiki/edit-section\");\nrequire(\"./wiki/form\");\nrequire(\"./wiki/login-modal\");\nrequire(\"./wiki/preferences\");\nrequire(\"./wiki/toc\");\nrequire(\"./wiki/table\");\n\nrequire(\"./wiki/migrations\");\n","// Add anchor icons to headings\n// See also src/sass/wiki/_anchor.scss\n\nconst headlines = document.getElementsByClassName(\"mw-headline\");\n\nfor (let i = 0; i < headlines.length; i++) {\n  const headline = headlines.item(i);\n\n  const wrap = document.createElement(\"span\");\n  wrap.className = \"mw-anchor\";\n\n  const link = document.createElement(\"a\");\n  link.href = \"#\" + headline.id;\n  link.innerHTML =\n    '<svg class=\"bi bi-link-45deg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\"/><path d=\"M5.712 6.96l.167-.167a1.99 1.99 0 0 1 .896-.518 1.99 1.99 0 0 1 .518-.896l.167-.167A3.004 3.004 0 0 0 6 5.499c-.22.46-.316.963-.288 1.46z\"/><path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z\"/><path d=\"M10 9.5a2.99 2.99 0 0 0 .288-1.46l-.167.167a1.99 1.99 0 0 1-.896.518 1.99 1.99 0 0 1-.518.896l-.167.167A3.004 3.004 0 0 0 10 9.501z\"/></svg>';\n\n  wrap.append(link);\n  headline.after(wrap);\n}\n","// The \"Edit\" text is replaced with a pencil icon.\n// See also src/sass/wiki/_edit-section.scss\n\nconst wraps = document.getElementsByClassName(\"mw-editsection\");\n\nfor (let i = 0; i < wraps.length; i++) {\n  const wrap = wraps.item(i);\n  const link = wrap.getElementsByTagName(\"a\").item(0);\n  link.innerHTML =\n    '<svg class=\"bi bi-pencil\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z\"/><path fill-rule=\"evenodd\" d=\"M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z\"/></svg>';\n}\n","const buttons = document.getElementsByClassName(\"mw-htmlform-submit\");\n\nfor (let i = 0; i < buttons.length; i++) {\n  const button = buttons.item(i).classList.add(\"btn\", \"btn-primary\");\n}\n","/**\n * Automatically focus username input after opening login modal.\n * This is a fallback for old Firefox (<= 57) because autofocus property doesn't\n * work and cause style loading issues.\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1404468\n */\nvar toggle = document.getElementById(\"login-modal-toggle\");\n\nif (toggle) {\n  toggle.addEventListener('click', function () {\n    // Must set focus after modal shown, otherwise it won't focus or wrong\n    // position of auto-fill menu\n    setTimeout(function () {\n      document.getElementById(\"login-username\").focus();\n    }, 500);\n  });\n}\n","var boxes = document.getElementsByClassName('box');\n\nfor (var i = 0; i < boxes.length; i++) {\n  var box = boxes.item(i);\n\n  box.classList.remove(\"box\", \"box-shadow\", \"infobox\");\n  box.classList.add(\"card\");\n\n  // Margin for float card\n  if (box.style.float === \"right\") {\n    box.classList.add(\"ml-3\");\n  } else if (box.style.float === \"left\") {\n    box.classList.add(\"mr-3\");\n  }\n\n  // Wrap all content with a \"card-body\" block\n  var cardBody = document.createElement('div');\n  cardBody.classList.add('card-body');\n  cardBody.innerHTML = box.innerHTML;\n  box.innerHTML = '';\n  box.appendChild(cardBody);\n\n  // Set card image\n  var imgs = box.getElementsByTagName(\"img\");\n  if (imgs.length > 0 && imgs.item(0).clientWidth >= 100) {\n    imgs.item(0).classList.add(\"card-img-top\");\n    box.insertBefore(imgs.item(0), box.firstChild);\n  }\n\n  // Set card title\n  var cardHeaders = box.getElementsByClassName(\"box-header\");\n  if (cardHeaders) {\n    var cardHeader = cardHeaders.item(0);\n    var title = document.createElement('h4');\n    title.classList.add('card-title');\n    title.innerHTML = cardHeader.innerHTML;\n    cardHeader.parentNode.removeChild(cardHeader);\n    cardBody.insertBefore(title, cardBody.firstChild);\n  }\n\n  // Remove empty <p> tag\n  var ps = cardBody.getElementsByTagName('p');\n  for (var j = 0; j < ps.length; j++) {\n    var p = ps.item(j);\n    if (p.getElementsByTagName(\"img\").length || p.textContent.trim()) return;\n    p.parentNode.removeChild(p);\n  }\n}\n","require(\"./box\");\n","const preftoc = document.getElementById(\"preftoc\");\nconst preferences = document.getElementById(\"preferences\");\nconst items = preftoc.getElementsByTagName(\"li\");\nconst links = preftoc.getElementsByTagName(\"a\");\n\npreftoc.classList.add(\"nav\", \"nav-pills\");\npreferences.classList.add(\"card\", \"card-body\", \"mt-3\");\n\nfor (let i = 0; i < items.length; i++) {\n  const item = items.item(i);\n  item.classList.add(\"nav-item\");\n  const link = item.getElementsByTagName(\"a\").item(0);\n  link.classList.add(\"nav-link\");\n  if (item.classList.contains(\"selected\")) {\n    link.classList.add(\"active\");\n  }\n  link.addEventListener(\"click\", function () {\n    for (let j = 0; j < links.length; j++) {\n      links.item(j).classList.remove(\"active\");\n    }\n    link.classList.add(\"active\");\n  });\n}\n","const tables = document.getElementsByClassName(\"wikitable\");\n\nwhile (tables.length) {\n  const list = tables.item(0).classList;\n  list.add(\"table\");\n  list.remove(\"wikitable\");\n}\n","// Move table of contents to sidebar\nconst toc = document.getElementById(\"toc\");\nconst sidebar = document.getElementById(\"toc-sidebar\");\nconst main = document.getElementById(\"main\");\n\nif (sidebar) {\n  if (toc) {\n    sidebar.append(toc);\n    sidebar.classList.add(\"d-lg-block\", \"col-lg-3\");\n    main.classList.add(\"col-lg-9\");\n  }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY2hhbWVsZW9uLXdpa2kuanMiLCJzcmMvanMvd2lraS9hbmNob3IuanMiLCJzcmMvanMvd2lraS9lZGl0LXNlY3Rpb24uanMiLCJzcmMvanMvd2lraS9mb3JtLmpzIiwic3JjL2pzL3dpa2kvbG9naW4tbW9kYWwuanMiLCJzcmMvanMvd2lraS9taWdyYXRpb25zL2JveC5qcyIsInNyYy9qcy93aWtpL21pZ3JhdGlvbnMvaW5kZXguanMiLCJzcmMvanMvd2lraS9wcmVmZXJlbmNlcy5qcyIsInNyYy9qcy93aWtpL3RhYmxlLmpzIiwic3JjL2pzL3dpa2kvdG9jLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsInJlcXVpcmUoXCIuL3dpa2kvYW5jaG9yXCIpO1xucmVxdWlyZShcIi4vd2lraS9lZGl0LXNlY3Rpb25cIik7XG5yZXF1aXJlKFwiLi93aWtpL2Zvcm1cIik7XG5yZXF1aXJlKFwiLi93aWtpL2xvZ2luLW1vZGFsXCIpO1xucmVxdWlyZShcIi4vd2lraS9wcmVmZXJlbmNlc1wiKTtcbnJlcXVpcmUoXCIuL3dpa2kvdG9jXCIpO1xucmVxdWlyZShcIi4vd2lraS90YWJsZVwiKTtcblxucmVxdWlyZShcIi4vd2lraS9taWdyYXRpb25zXCIpO1xuIiwiLy8gQWRkIGFuY2hvciBpY29ucyB0byBoZWFkaW5nc1xuLy8gU2VlIGFsc28gc3JjL3Nhc3Mvd2lraS9fYW5jaG9yLnNjc3NcblxuY29uc3QgaGVhZGxpbmVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm13LWhlYWRsaW5lXCIpO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGhlYWRsaW5lcy5sZW5ndGg7IGkrKykge1xuICBjb25zdCBoZWFkbGluZSA9IGhlYWRsaW5lcy5pdGVtKGkpO1xuXG4gIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgd3JhcC5jbGFzc05hbWUgPSBcIm13LWFuY2hvclwiO1xuXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgbGluay5ocmVmID0gXCIjXCIgKyBoZWFkbGluZS5pZDtcbiAgbGluay5pbm5lckhUTUwgPVxuICAgICc8c3ZnIGNsYXNzPVwiYmkgYmktbGluay00NWRlZ1wiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgdmlld0JveD1cIjAgMCAxNiAxNlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk00LjcxNSA2LjU0MkwzLjM0MyA3LjkxNGEzIDMgMCAxIDAgNC4yNDMgNC4yNDNsMS44MjgtMS44MjlBMyAzIDAgMCAwIDguNTg2IDUuNUw4IDYuMDg2YTEuMDAxIDEuMDAxIDAgMCAwLS4xNTQuMTk5IDIgMiAwIDAgMSAuODYxIDMuMzM3TDYuODggMTEuNDVhMiAyIDAgMSAxLTIuODMtMi44M2wuNzkzLS43OTJhNC4wMTggNC4wMTggMCAwIDEtLjEyOC0xLjI4N3pcIi8+PHBhdGggZD1cIk01LjcxMiA2Ljk2bC4xNjctLjE2N2ExLjk5IDEuOTkgMCAwIDEgLjg5Ni0uNTE4IDEuOTkgMS45OSAwIDAgMSAuNTE4LS44OTZsLjE2Ny0uMTY3QTMuMDA0IDMuMDA0IDAgMCAwIDYgNS40OTljLS4yMi40Ni0uMzE2Ljk2My0uMjg4IDEuNDZ6XCIvPjxwYXRoIGQ9XCJNNi41ODYgNC42NzJBMyAzIDAgMCAwIDcuNDE0IDkuNWwuNzc1LS43NzZhMiAyIDAgMCAxLS44OTYtMy4zNDZMOS4xMiAzLjU1YTIgMiAwIDAgMSAyLjgzIDIuODNsLS43OTMuNzkyYy4xMTIuNDIuMTU1Ljg1NS4xMjggMS4yODdsMS4zNzItMS4zNzJhMyAzIDAgMCAwLTQuMjQzLTQuMjQzTDYuNTg2IDQuNjcyelwiLz48cGF0aCBkPVwiTTEwIDkuNWEyLjk5IDIuOTkgMCAwIDAgLjI4OC0xLjQ2bC0uMTY3LjE2N2ExLjk5IDEuOTkgMCAwIDEtLjg5Ni41MTggMS45OSAxLjk5IDAgMCAxLS41MTguODk2bC0uMTY3LjE2N0EzLjAwNCAzLjAwNCAwIDAgMCAxMCA5LjUwMXpcIi8+PC9zdmc+JztcblxuICB3cmFwLmFwcGVuZChsaW5rKTtcbiAgaGVhZGxpbmUuYWZ0ZXIod3JhcCk7XG59XG4iLCIvLyBUaGUgXCJFZGl0XCIgdGV4dCBpcyByZXBsYWNlZCB3aXRoIGEgcGVuY2lsIGljb24uXG4vLyBTZWUgYWxzbyBzcmMvc2Fzcy93aWtpL19lZGl0LXNlY3Rpb24uc2Nzc1xuXG5jb25zdCB3cmFwcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtdy1lZGl0c2VjdGlvblwiKTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCB3cmFwcy5sZW5ndGg7IGkrKykge1xuICBjb25zdCB3cmFwID0gd3JhcHMuaXRlbShpKTtcbiAgY29uc3QgbGluayA9IHdyYXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpLml0ZW0oMCk7XG4gIGxpbmsuaW5uZXJIVE1MID1cbiAgICAnPHN2ZyBjbGFzcz1cImJpIGJpLXBlbmNpbFwiIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgdmlld0JveD1cIjAgMCAxNiAxNlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTEuMjkzIDEuMjkzYTEgMSAwIDAgMSAxLjQxNCAwbDIgMmExIDEgMCAwIDEgMCAxLjQxNGwtOSA5YTEgMSAwIDAgMS0uMzkuMjQybC0zIDFhMSAxIDAgMCAxLTEuMjY2LTEuMjY1bDEtM2ExIDEgMCAwIDEgLjI0Mi0uMzkxbDktOXpNMTIgMmwyIDItOSA5LTMgMSAxLTMgOS05elwiLz48cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMi4xNDYgNi4zNTRsLTIuNS0yLjUuNzA4LS43MDggMi41IDIuNS0uNzA3LjcwOHpNMyAxMHYuNWEuNS41IDAgMCAwIC41LjVINHYuNWEuNS41IDAgMCAwIC41LjVINXYuNWEuNS41IDAgMCAwIC41LjVINnYtMS41YS41LjUgMCAwIDAtLjUtLjVINXYtLjVhLjUuNSAwIDAgMC0uNS0uNUgzelwiLz48L3N2Zz4nO1xufVxuIiwiY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtdy1odG1sZm9ybS1zdWJtaXRcIik7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICBjb25zdCBidXR0b24gPSBidXR0b25zLml0ZW0oaSkuY2xhc3NMaXN0LmFkZChcImJ0blwiLCBcImJ0bi1wcmltYXJ5XCIpO1xufVxuIiwiLyoqXG4gKiBBdXRvbWF0aWNhbGx5IGZvY3VzIHVzZXJuYW1lIGlucHV0IGFmdGVyIG9wZW5pbmcgbG9naW4gbW9kYWwuXG4gKiBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIG9sZCBGaXJlZm94ICg8PSA1NykgYmVjYXVzZSBhdXRvZm9jdXMgcHJvcGVydHkgZG9lc24ndFxuICogd29yayBhbmQgY2F1c2Ugc3R5bGUgbG9hZGluZyBpc3N1ZXMuXG4gKiBAc2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MDQ0NjhcbiAqL1xudmFyIHRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW4tbW9kYWwtdG9nZ2xlXCIpO1xuXG5pZiAodG9nZ2xlKSB7XG4gIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBNdXN0IHNldCBmb2N1cyBhZnRlciBtb2RhbCBzaG93biwgb3RoZXJ3aXNlIGl0IHdvbid0IGZvY3VzIG9yIHdyb25nXG4gICAgLy8gcG9zaXRpb24gb2YgYXV0by1maWxsIG1lbnVcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW4tdXNlcm5hbWVcIikuZm9jdXMoKTtcbiAgICB9LCA1MDApO1xuICB9KTtcbn1cbiIsInZhciBib3hlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JveCcpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IGJveGVzLmxlbmd0aDsgaSsrKSB7XG4gIHZhciBib3ggPSBib3hlcy5pdGVtKGkpO1xuXG4gIGJveC5jbGFzc0xpc3QucmVtb3ZlKFwiYm94XCIsIFwiYm94LXNoYWRvd1wiLCBcImluZm9ib3hcIik7XG4gIGJveC5jbGFzc0xpc3QuYWRkKFwiY2FyZFwiKTtcblxuICAvLyBNYXJnaW4gZm9yIGZsb2F0IGNhcmRcbiAgaWYgKGJveC5zdHlsZS5mbG9hdCA9PT0gXCJyaWdodFwiKSB7XG4gICAgYm94LmNsYXNzTGlzdC5hZGQoXCJtbC0zXCIpO1xuICB9IGVsc2UgaWYgKGJveC5zdHlsZS5mbG9hdCA9PT0gXCJsZWZ0XCIpIHtcbiAgICBib3guY2xhc3NMaXN0LmFkZChcIm1yLTNcIik7XG4gIH1cblxuICAvLyBXcmFwIGFsbCBjb250ZW50IHdpdGggYSBcImNhcmQtYm9keVwiIGJsb2NrXG4gIHZhciBjYXJkQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjYXJkQm9keS5jbGFzc0xpc3QuYWRkKCdjYXJkLWJvZHknKTtcbiAgY2FyZEJvZHkuaW5uZXJIVE1MID0gYm94LmlubmVySFRNTDtcbiAgYm94LmlubmVySFRNTCA9ICcnO1xuICBib3guYXBwZW5kQ2hpbGQoY2FyZEJvZHkpO1xuXG4gIC8vIFNldCBjYXJkIGltYWdlXG4gIHZhciBpbWdzID0gYm94LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpO1xuICBpZiAoaW1ncy5sZW5ndGggPiAwICYmIGltZ3MuaXRlbSgwKS5jbGllbnRXaWR0aCA+PSAxMDApIHtcbiAgICBpbWdzLml0ZW0oMCkuY2xhc3NMaXN0LmFkZChcImNhcmQtaW1nLXRvcFwiKTtcbiAgICBib3guaW5zZXJ0QmVmb3JlKGltZ3MuaXRlbSgwKSwgYm94LmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gU2V0IGNhcmQgdGl0bGVcbiAgdmFyIGNhcmRIZWFkZXJzID0gYm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJib3gtaGVhZGVyXCIpO1xuICBpZiAoY2FyZEhlYWRlcnMpIHtcbiAgICB2YXIgY2FyZEhlYWRlciA9IGNhcmRIZWFkZXJzLml0ZW0oMCk7XG4gICAgdmFyIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXRpdGxlJyk7XG4gICAgdGl0bGUuaW5uZXJIVE1MID0gY2FyZEhlYWRlci5pbm5lckhUTUw7XG4gICAgY2FyZEhlYWRlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNhcmRIZWFkZXIpO1xuICAgIGNhcmRCb2R5Lmluc2VydEJlZm9yZSh0aXRsZSwgY2FyZEJvZHkuZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvLyBSZW1vdmUgZW1wdHkgPHA+IHRhZ1xuICB2YXIgcHMgPSBjYXJkQm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgncCcpO1xuICBmb3IgKHZhciBqID0gMDsgaiA8IHBzLmxlbmd0aDsgaisrKSB7XG4gICAgdmFyIHAgPSBwcy5pdGVtKGopO1xuICAgIGlmIChwLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpLmxlbmd0aCB8fCBwLnRleHRDb250ZW50LnRyaW0oKSkgcmV0dXJuO1xuICAgIHAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwKTtcbiAgfVxufVxuIiwicmVxdWlyZShcIi4vYm94XCIpO1xuIiwiY29uc3QgcHJlZnRvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJlZnRvY1wiKTtcbmNvbnN0IHByZWZlcmVuY2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmVmZXJlbmNlc1wiKTtcbmNvbnN0IGl0ZW1zID0gcHJlZnRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpXCIpO1xuY29uc3QgbGlua3MgPSBwcmVmdG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKTtcblxucHJlZnRvYy5jbGFzc0xpc3QuYWRkKFwibmF2XCIsIFwibmF2LXBpbGxzXCIpO1xucHJlZmVyZW5jZXMuY2xhc3NMaXN0LmFkZChcImNhcmRcIiwgXCJjYXJkLWJvZHlcIiwgXCJtdC0zXCIpO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gIGNvbnN0IGl0ZW0gPSBpdGVtcy5pdGVtKGkpO1xuICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJuYXYtaXRlbVwiKTtcbiAgY29uc3QgbGluayA9IGl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpLml0ZW0oMCk7XG4gIGxpbmsuY2xhc3NMaXN0LmFkZChcIm5hdi1saW5rXCIpO1xuICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJzZWxlY3RlZFwiKSkge1xuICAgIGxpbmsuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgfVxuICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBsaW5rcy5sZW5ndGg7IGorKykge1xuICAgICAgbGlua3MuaXRlbShqKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICBsaW5rLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH0pO1xufVxuIiwiY29uc3QgdGFibGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIndpa2l0YWJsZVwiKTtcblxud2hpbGUgKHRhYmxlcy5sZW5ndGgpIHtcbiAgY29uc3QgbGlzdCA9IHRhYmxlcy5pdGVtKDApLmNsYXNzTGlzdDtcbiAgbGlzdC5hZGQoXCJ0YWJsZVwiKTtcbiAgbGlzdC5yZW1vdmUoXCJ3aWtpdGFibGVcIik7XG59XG4iLCIvLyBNb3ZlIHRhYmxlIG9mIGNvbnRlbnRzIHRvIHNpZGViYXJcbmNvbnN0IHRvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9jXCIpO1xuY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9jLXNpZGViYXJcIik7XG5jb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluXCIpO1xuXG5pZiAoc2lkZWJhcikge1xuICBpZiAodG9jKSB7XG4gICAgc2lkZWJhci5hcHBlbmQodG9jKTtcbiAgICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoXCJkLWxnLWJsb2NrXCIsIFwiY29sLWxnLTNcIik7XG4gICAgbWFpbi5jbGFzc0xpc3QuYWRkKFwiY29sLWxnLTlcIik7XG4gIH1cbn1cbiJdfQ=="}