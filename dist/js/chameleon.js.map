{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/sticky-scroller/dist/sticky-scroller.umd.js","src/js/chameleon.js","src/js/megamenu.js","src/js/toc.js"],"names":[],"mappings":"AAAA;ACAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chameleon.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.StickyScroller=t():e.StickyScroller=t()}(window,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t){e.exports=class{constructor(e,t){if(this.newScrollPosition=0,this.oldScrollPositon=0,this.ticking=!1,\"string\"==typeof e)this.element=document.querySelector(e);else{if(!(e instanceof HTMLElement))return void console.error(\"StickyScroller: element is required.\");this.element=e}this.element.style.overflowY=\"hidden\",window.addEventListener(\"scroll\",this.onWindowScroll.bind(this))}onWindowScroll(){this.newScrollPosition=window.scrollY,this.ticking||(window.requestAnimationFrame(()=>{this.translate(),this.ticking=!1,this.oldScrollPositon=this.newScrollPosition}),this.ticking=!0)}translate(){const e=this.element.parentElement.getBoundingClientRect(),t=this.newScrollPosition-this.oldScrollPositon;e.top>0&&t>0||e.bottom<window.innerHeight&&t<0||(this.element.scrollTop=this.element.scrollTop+t)}}}])});","/**\n * For webistes that already provide Bootstrap JavaScript.\n *\n * Examples: Weblate (l10n.opensuse.org), Cachet (status.opensuse.org)\n */\n\nrequire(\"./megamenu\");\nrequire(\"./toc\");\n","document.addEventListener(\"DOMContentLoaded\", function() {\n  const megamenu = document.getElementById(\"megamenu\");\n  if (!megamenu) {\n    return;\n  }\n  fetch('http://127.0.0.1:4000/api/v0/sites.json').then(languages_response => {\n    return languages_response.json();\n  }).then(languages => {\n    var lang = document.documentElement.lang;\n    if (!lang || !(lang in languages)) {\n      lang = 'en';\n    }\n\n    fetch(languages[lang]).then(sections_response => {\n      return sections_response.json();\n    }).then(sections => {\n      const content = sections\n        .map(function(section) {\n          const links = section.links\n            .map(function(link) {\n              return `<li>${link.icon} <a href=\"${link.url}\">${link.title}</a></li>`;\n            })\n            .join(\"\");\n\n          return `\n            <div class=\"col-6 col-md-4 col-lg-2\">\n              <h5 class=\"megamenu-heading\">${section.title}</h5>\n              <ul class=\"megamenu-list\">\n                ${links}\n              </ul>\n            </div>\n          `;\n        })\n        .join(\"\");\n\n      megamenu.innerHTML = `\n        <div class=\"container-fluid\">\n          <div class=\"row\">\n            ${content}\n          </div>\n        </div>\n      `;\n    });\n  });\n});\n","const StickyScroller = require(\"sticky-scroller\");\n\nconst toc = document.querySelector(\".toc\");\n\nconst lastIds = [\"\", \"\", \"\", \"\", \"\"];\nconst regNonWord = /[\\ \\-\\#\\/\\\\\\.\\,\\\"\\'\\:\\;\\[\\]\\{\\}\\&\\%\\$\\@\\!\\~\\+\\=\\<\\>]+/g;\nconst regNumber = /^\\d+/;\nlet showNumber = true;\n\nif (toc) {\n  new StickyScroller(toc); // scroll with the page magically\n\n  const scope = document.querySelector(\".toc-scope\");\n\n  if (scope) {\n    const headings = scope.querySelectorAll(\n      \"h2:not(.no-toc), h3:not(.no-toc), h4:not(.no-toc), h5:not(.no-toc), h6:not(.no-toc)\"\n    );\n\n    const list = [];\n    let numberCounter = 0;\n\n    headings.forEach(function(h) {\n      const level = parseInt(h.tagName.substr(1)) - 2;\n      linkHead(h, level);\n      const item = {};\n      item.link = \"#\" + h.id;\n      item.text = h.textContent.trim();\n      if (regNumber.test(item.text)) {\n        numberCounter++;\n      }\n      pushItem(list, item, level);\n    });\n\n    // In changelog, there are already heading numbers. So we don't need to show\n    // additional numbers anymore.\n    showNumber = numberCounter < 5;\n    const listEl = document.createElement(\"ul\");\n    toc.append(listEl);\n    renderList(listEl, list);\n  }\n}\n\nfunction linkHead(h, level) {\n  if (!h.id) {\n    let id = \"\";\n    if (level > 0) {\n      id += lastIds[level - 1] + \"-\";\n    }\n    id += h.textContent\n      .trim()\n      .toLowerCase()\n      .replace(regNonWord, \"-\");\n\n    h.id = id;\n  }\n\n  lastIds[level] = h.id;\n}\n\nfunction pushItem(list, item, level) {\n  if (level === 0) {\n    list.push(item);\n  } else {\n    if (!list.length) {\n      list.push({ link: \"#\", text: \"???\" });\n    }\n    const parent = list[list.length - 1];\n    if (!parent.children) {\n      parent.children = [];\n    }\n    pushItem(parent.children, item, level - 1);\n  }\n}\n\nfunction renderList(listEl, list, prefix = \"\") {\n  list.forEach(function(item, i) {\n    const itemEl = document.createElement(\"li\");\n    const linkEl = document.createElement(\"a\");\n    listEl.append(itemEl);\n    itemEl.append(linkEl);\n    linkEl.href = item.link;\n    if (showNumber) {\n      linkEl.textContent = prefix + (i + 1) + \". \" + item.text;\n    } else {\n      linkEl.textContent = item.text;\n    }\n\n    if (item.children) {\n      const childrenEl = document.createElement(\"ul\");\n      itemEl.append(childrenEl);\n      renderList(childrenEl, item.children, prefix + (i + 1) + \".\");\n    }\n  });\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvc3RpY2t5LXNjcm9sbGVyL2Rpc3Qvc3RpY2t5LXNjcm9sbGVyLnVtZC5qcyIsInNyYy9qcy9jaGFtZWxlb24uanMiLCJzcmMvanMvbWVnYW1lbnUuanMiLCJzcmMvanMvdG9jLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlN0aWNreVNjcm9sbGVyPXQoKTplLlN0aWNreVNjcm9sbGVyPXQoKX0od2luZG93LGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG8obil7aWYodFtuXSlyZXR1cm4gdFtuXS5leHBvcnRzO3ZhciBpPXRbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLG8pLGkubD0hMCxpLmV4cG9ydHN9cmV0dXJuIG8ubT1lLG8uYz10LG8uZD1mdW5jdGlvbihlLHQsbil7by5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpufSl9LG8ucj1mdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sby5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBvLmQodCxcImFcIix0KSx0fSxvLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LG8ucD1cIlwiLG8oby5zPTApfShbZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXtpZih0aGlzLm5ld1Njcm9sbFBvc2l0aW9uPTAsdGhpcy5vbGRTY3JvbGxQb3NpdG9uPTAsdGhpcy50aWNraW5nPSExLFwic3RyaW5nXCI9PXR5cGVvZiBlKXRoaXMuZWxlbWVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpO2Vsc2V7aWYoIShlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJTdGlja3lTY3JvbGxlcjogZWxlbWVudCBpcyByZXF1aXJlZC5cIik7dGhpcy5lbGVtZW50PWV9dGhpcy5lbGVtZW50LnN0eWxlLm92ZXJmbG93WT1cImhpZGRlblwiLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vbldpbmRvd1Njcm9sbC5iaW5kKHRoaXMpKX1vbldpbmRvd1Njcm9sbCgpe3RoaXMubmV3U2Nyb2xsUG9zaXRpb249d2luZG93LnNjcm9sbFksdGhpcy50aWNraW5nfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+e3RoaXMudHJhbnNsYXRlKCksdGhpcy50aWNraW5nPSExLHRoaXMub2xkU2Nyb2xsUG9zaXRvbj10aGlzLm5ld1Njcm9sbFBvc2l0aW9ufSksdGhpcy50aWNraW5nPSEwKX10cmFuc2xhdGUoKXtjb25zdCBlPXRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHQ9dGhpcy5uZXdTY3JvbGxQb3NpdGlvbi10aGlzLm9sZFNjcm9sbFBvc2l0b247ZS50b3A+MCYmdD4wfHxlLmJvdHRvbTx3aW5kb3cuaW5uZXJIZWlnaHQmJnQ8MHx8KHRoaXMuZWxlbWVudC5zY3JvbGxUb3A9dGhpcy5lbGVtZW50LnNjcm9sbFRvcCt0KX19fV0pfSk7IiwiLyoqXG4gKiBGb3Igd2ViaXN0ZXMgdGhhdCBhbHJlYWR5IHByb3ZpZGUgQm9vdHN0cmFwIEphdmFTY3JpcHQuXG4gKlxuICogRXhhbXBsZXM6IFdlYmxhdGUgKGwxMG4ub3BlbnN1c2Uub3JnKSwgQ2FjaGV0IChzdGF0dXMub3BlbnN1c2Uub3JnKVxuICovXG5cbnJlcXVpcmUoXCIuL21lZ2FtZW51XCIpO1xucmVxdWlyZShcIi4vdG9jXCIpO1xuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IG1lZ2FtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZWdhbWVudVwiKTtcbiAgaWYgKCFtZWdhbWVudSkge1xuICAgIHJldHVybjtcbiAgfVxuICBmZXRjaCgnaHR0cDovLzEyNy4wLjAuMTo0MDAwL2FwaS92MC9zaXRlcy5qc29uJykudGhlbihsYW5ndWFnZXNfcmVzcG9uc2UgPT4ge1xuICAgIHJldHVybiBsYW5ndWFnZXNfcmVzcG9uc2UuanNvbigpO1xuICB9KS50aGVuKGxhbmd1YWdlcyA9PiB7XG4gICAgdmFyIGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcbiAgICBpZiAoIWxhbmcgfHwgIShsYW5nIGluIGxhbmd1YWdlcykpIHtcbiAgICAgIGxhbmcgPSAnZW4nO1xuICAgIH1cblxuICAgIGZldGNoKGxhbmd1YWdlc1tsYW5nXSkudGhlbihzZWN0aW9uc19yZXNwb25zZSA9PiB7XG4gICAgICByZXR1cm4gc2VjdGlvbnNfcmVzcG9uc2UuanNvbigpO1xuICAgIH0pLnRoZW4oc2VjdGlvbnMgPT4ge1xuICAgICAgY29uc3QgY29udGVudCA9IHNlY3Rpb25zXG4gICAgICAgIC5tYXAoZnVuY3Rpb24oc2VjdGlvbikge1xuICAgICAgICAgIGNvbnN0IGxpbmtzID0gc2VjdGlvbi5saW5rc1xuICAgICAgICAgICAgLm1hcChmdW5jdGlvbihsaW5rKSB7XG4gICAgICAgICAgICAgIHJldHVybiBgPGxpPiR7bGluay5pY29ufSA8YSBocmVmPVwiJHtsaW5rLnVybH1cIj4ke2xpbmsudGl0bGV9PC9hPjwvbGk+YDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKTtcblxuICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLW1kLTQgY29sLWxnLTJcIj5cbiAgICAgICAgICAgICAgPGg1IGNsYXNzPVwibWVnYW1lbnUtaGVhZGluZ1wiPiR7c2VjdGlvbi50aXRsZX08L2g1PlxuICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJtZWdhbWVudS1saXN0XCI+XG4gICAgICAgICAgICAgICAgJHtsaW5rc31cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKFwiXCIpO1xuXG4gICAgICBtZWdhbWVudS5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAke2NvbnRlbnR9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsImNvbnN0IFN0aWNreVNjcm9sbGVyID0gcmVxdWlyZShcInN0aWNreS1zY3JvbGxlclwiKTtcblxuY29uc3QgdG9jID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2NcIik7XG5cbmNvbnN0IGxhc3RJZHMgPSBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl07XG5jb25zdCByZWdOb25Xb3JkID0gL1tcXCBcXC1cXCNcXC9cXFxcXFwuXFwsXFxcIlxcJ1xcOlxcO1xcW1xcXVxce1xcfVxcJlxcJVxcJFxcQFxcIVxcflxcK1xcPVxcPFxcPl0rL2c7XG5jb25zdCByZWdOdW1iZXIgPSAvXlxcZCsvO1xubGV0IHNob3dOdW1iZXIgPSB0cnVlO1xuXG5pZiAodG9jKSB7XG4gIG5ldyBTdGlja3lTY3JvbGxlcih0b2MpOyAvLyBzY3JvbGwgd2l0aCB0aGUgcGFnZSBtYWdpY2FsbHlcblxuICBjb25zdCBzY29wZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9jLXNjb3BlXCIpO1xuXG4gIGlmIChzY29wZSkge1xuICAgIGNvbnN0IGhlYWRpbmdzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIFwiaDI6bm90KC5uby10b2MpLCBoMzpub3QoLm5vLXRvYyksIGg0Om5vdCgubm8tdG9jKSwgaDU6bm90KC5uby10b2MpLCBoNjpub3QoLm5vLXRvYylcIlxuICAgICk7XG5cbiAgICBjb25zdCBsaXN0ID0gW107XG4gICAgbGV0IG51bWJlckNvdW50ZXIgPSAwO1xuXG4gICAgaGVhZGluZ3MuZm9yRWFjaChmdW5jdGlvbihoKSB7XG4gICAgICBjb25zdCBsZXZlbCA9IHBhcnNlSW50KGgudGFnTmFtZS5zdWJzdHIoMSkpIC0gMjtcbiAgICAgIGxpbmtIZWFkKGgsIGxldmVsKTtcbiAgICAgIGNvbnN0IGl0ZW0gPSB7fTtcbiAgICAgIGl0ZW0ubGluayA9IFwiI1wiICsgaC5pZDtcbiAgICAgIGl0ZW0udGV4dCA9IGgudGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgaWYgKHJlZ051bWJlci50ZXN0KGl0ZW0udGV4dCkpIHtcbiAgICAgICAgbnVtYmVyQ291bnRlcisrO1xuICAgICAgfVxuICAgICAgcHVzaEl0ZW0obGlzdCwgaXRlbSwgbGV2ZWwpO1xuICAgIH0pO1xuXG4gICAgLy8gSW4gY2hhbmdlbG9nLCB0aGVyZSBhcmUgYWxyZWFkeSBoZWFkaW5nIG51bWJlcnMuIFNvIHdlIGRvbid0IG5lZWQgdG8gc2hvd1xuICAgIC8vIGFkZGl0aW9uYWwgbnVtYmVycyBhbnltb3JlLlxuICAgIHNob3dOdW1iZXIgPSBudW1iZXJDb3VudGVyIDwgNTtcbiAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgdG9jLmFwcGVuZChsaXN0RWwpO1xuICAgIHJlbmRlckxpc3QobGlzdEVsLCBsaXN0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsaW5rSGVhZChoLCBsZXZlbCkge1xuICBpZiAoIWguaWQpIHtcbiAgICBsZXQgaWQgPSBcIlwiO1xuICAgIGlmIChsZXZlbCA+IDApIHtcbiAgICAgIGlkICs9IGxhc3RJZHNbbGV2ZWwgLSAxXSArIFwiLVwiO1xuICAgIH1cbiAgICBpZCArPSBoLnRleHRDb250ZW50XG4gICAgICAudHJpbSgpXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnJlcGxhY2UocmVnTm9uV29yZCwgXCItXCIpO1xuXG4gICAgaC5pZCA9IGlkO1xuICB9XG5cbiAgbGFzdElkc1tsZXZlbF0gPSBoLmlkO1xufVxuXG5mdW5jdGlvbiBwdXNoSXRlbShsaXN0LCBpdGVtLCBsZXZlbCkge1xuICBpZiAobGV2ZWwgPT09IDApIHtcbiAgICBsaXN0LnB1c2goaXRlbSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFsaXN0Lmxlbmd0aCkge1xuICAgICAgbGlzdC5wdXNoKHsgbGluazogXCIjXCIsIHRleHQ6IFwiPz8/XCIgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudCA9IGxpc3RbbGlzdC5sZW5ndGggLSAxXTtcbiAgICBpZiAoIXBhcmVudC5jaGlsZHJlbikge1xuICAgICAgcGFyZW50LmNoaWxkcmVuID0gW107XG4gICAgfVxuICAgIHB1c2hJdGVtKHBhcmVudC5jaGlsZHJlbiwgaXRlbSwgbGV2ZWwgLSAxKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJMaXN0KGxpc3RFbCwgbGlzdCwgcHJlZml4ID0gXCJcIikge1xuICBsaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSkge1xuICAgIGNvbnN0IGl0ZW1FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBjb25zdCBsaW5rRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsaXN0RWwuYXBwZW5kKGl0ZW1FbCk7XG4gICAgaXRlbUVsLmFwcGVuZChsaW5rRWwpO1xuICAgIGxpbmtFbC5ocmVmID0gaXRlbS5saW5rO1xuICAgIGlmIChzaG93TnVtYmVyKSB7XG4gICAgICBsaW5rRWwudGV4dENvbnRlbnQgPSBwcmVmaXggKyAoaSArIDEpICsgXCIuIFwiICsgaXRlbS50ZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW5rRWwudGV4dENvbnRlbnQgPSBpdGVtLnRleHQ7XG4gICAgfVxuXG4gICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgICBpdGVtRWwuYXBwZW5kKGNoaWxkcmVuRWwpO1xuICAgICAgcmVuZGVyTGlzdChjaGlsZHJlbkVsLCBpdGVtLmNoaWxkcmVuLCBwcmVmaXggKyAoaSArIDEpICsgXCIuXCIpO1xuICAgIH1cbiAgfSk7XG59XG4iXX0="}